{% extends "base.html" %}
{% block title %}Plan List{% endblock %}
{% block content %}
<style>
.plan-list-grid li {
  background: linear-gradient(90deg, #ffa8e6 0%, #a8d8ff 100%);
  color: #222;
  border-radius: 8px;
  margin-bottom: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  transition: background 0.2s, color 0.2s, transform 0.2s;
}
.plan-list-grid li a.plan-card-link {
  display: block;
  padding: 18px 16px;
  text-decoration: none;
  color: inherit;
}
.plan-list-grid li:hover {
  background: linear-gradient(90deg, #7eb0ff 0%, #ffb8b8 100%);
  color: #fff;
  transform: scale(1.02);
  z-index: 1;
}
.plan-list-grid li:hover a.plan-card-link {
  color: #fff;
}
</style>
<div class="plan-list-vertical">
  <h1>Plan List</h1>
  <form method="get" class="plan-search-form">
  <label>Prefecture:
      <select name="pref">
  <option value="">all</option>
        {% for val, label in PREF_CHOICES %}
          <option value="{{ val }}" {% if pref == val %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
      </select>
    </label>
  <label style="margin-top:8px;">Area:
      <select name="sub_area">
  <option value="">all</option>
        {% for val, label in SUBAREA_CHOICES %}
          <option value="{{ val }}" {% if sub_area == val %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
      </select>
    </label>
    <div style="margin-top:8px;">
  <button type="submit">Search</button>
      {% if pref or sub_area %}
  <a href="/plans/" style="margin-left:8px;">Clear</a>
      {% endif %}
    </div>
  </form>
  <div style="margin: 16px 0; width: 100%;">
    {% if show_display_buttons %}
    <form method="post" action="" id="display-mode-form">
      {% csrf_token %}
      {% if show_day_button %}
        <button type="submit" name="display_mode" value="day" style="margin-right:8px;">すべて日表示</button>
      {% endif %}
      {% if show_hide_button %}
        <button type="submit" name="hide_listed" value="1">リストのプランを非表示</button>
      {% endif %}
    </form>
    {% endif %}
    {% if plans %}
      <ul class="plan-list-grid">
        {% for p in plans %}
          <li>
            <a href="/plans/{{ p.id }}/" class="plan-card-link">
              <strong>{{ p.title }}</strong><br>
              <small>{{ p.pref }} / {{ p.sub_area }}</small><br>
              <small>{{ p.created_at }}</small>
            </a>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No plans found.</p>
    {% endif %}
  </div>
  <div style="margin-top:16px;">
  <a href="/plans/new/">+ Create New Plan</a>
  </div>
</div>
{% endblock %}
