{% extends "base.html" %}
{% block title %}Plan List{% endblock %}
{% block content %}
<div class="plan-list-vertical">
  <h1>Plan List</h1>
  <form method="get" class="plan-search-form">
  <label>Prefecture:
      <select name="pref">
        <option value="">（すべて）</option>
        {% for val, label in PREF_CHOICES %}
          <option value="{{ val }}" {% if pref == val %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
      </select>
    </label>
  <label style="margin-top:8px;">Area:
      <select name="sub_area">
        <option value="">（すべて）</option>
        {% for val, label in SUBAREA_CHOICES %}
          <option value="{{ val }}" {% if sub_area == val %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
      </select>
    </label>
    <div style="margin-top:8px;">
  <button type="submit">Search</button>
      {% if pref or sub_area %}
  <a href="/plans/" style="margin-left:8px;">Clear</a>
      {% endif %}
    </div>
  </form>
  <div style="margin: 16px 0; width: 100%;">
    {% if plans %}
      <ul class="plan-list-grid">
        {% for p in plans %}
          <li>
            <a href="/plans/{{ p.id }}/"><strong>{{ p.title }}</strong></a><br>
            <small>{{ p.pref }} / {{ p.sub_area }} ・ {{ p.created_at }}</small>
          </li>
        {% endfor %}
      </ul>
    {% else %}
  <p>No plans found.</p>
    {% endif %}
  </div>
  <div style="margin-top:16px;">
  <a href="/plans/new/">+ Create New Plan</a>
  </div>
</div>
{% endblock %}
